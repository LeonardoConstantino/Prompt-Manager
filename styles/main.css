@import 'tailwindcss';

/* 1. Definição correta do Dark Mode manual para Tailwind v4 */
@variant dark (&:where(.dark, .dark *));

/* 2. Configuração do Tema (Vinculando variáveis) */
@theme {
  --color-bg-app: var(--bg-app);
  --color-bg-surface: var(--bg-surface);
  --color-bg-surface-hover: var(--bg-surface-hover);
  --color-border-subtle: var(--border-subtle);

  --color-text-main: var(--text-main);
  --color-text-muted: var(--text-muted);

  --color-accent: var(--accent);
  --color-accent-hover: var(--accent-hover);
  --color-accent-text: var(--accent-text);

  /* Substitui a sans default pelo Plus Jakarta Sans */
  --font-sans: 'Plus Jakarta Sans', system-ui, sans-serif;

  /* Substitui a mono default pelo JetBrains Mono */
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;

  --animate-scale-in: scale-in 0.2s ease-out forwards;
  --animate-fade-in: fade-in 0.2s ease-out forwards;
  --animate-fade-in-up: fade-in-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;

  @keyframes fade-in-up {
    0% {
      opacity: 0;
      transform: translateY(15px); /* Começa 15px abaixo */
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scale-in {
    0% {
      transform: scale(0.95);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
}

/* 3. Variáveis Base (LIGHT MODE) */
:root {
  color-scheme: light; /* Força renderização clara nativa */

  --bg-app: #f4f4f5; /* Zinc 100 */
  --bg-surface: #ffffff; /* White */
  --bg-surface-hover: #e4e4e7;
  --border-subtle: #d4d4d8;
  --input-bg: #ffffff;

  --text-main: #18181b;
  --text-muted: #71717a;

  --accent: #7c3aed; /* Violet 600 */
  --accent-hover: #6d28d9;
  --accent-text: #ffffff;

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #d4d4d8;
  --scrollbar-thumb-hover: #a1a1aa;
}

/* 4. Variáveis DARK MODE (Com seletor de alta especificidade) */
:root.dark {
  color-scheme: dark; /* CRUCIAL: Muda a renderização nativa do browser */

  --bg-app: #09090b; /* Zinc 950 (Preto profundo) */
  --bg-surface: #18181b; /* Zinc 900 */
  --bg-surface-hover: #27272a;
  --border-subtle: #27272a;
  --input-bg: #000000;

  --text-main: #f4f4f5;
  --text-muted: #a1a1aa;

  --accent: #8b5cf6; /* Violet 500 (Mais claro para dark mode) */
  --accent-hover: #a78bfa;
  --accent-text: #ffffff;

  /* Scrollbar Dark */
  --scrollbar-thumb: #3f3f46;
  --scrollbar-thumb-hover: #52525b;
}

/* 5. Reset e Utilitários */
body {
  background-color: var(--bg-app);
  color: var(--text-main);
  @apply antialiased transition-colors duration-300;
}

@layer components {
  /* Navbar */
  .app-navbar {
    @apply h-16 bg-bg-surface/80 backdrop-blur-md border-b border-border-subtle flex items-center px-6 justify-between sticky top-0 z-40 transition-colors duration-300;
  }

  /* Input Surface - Corrigido */
  .input-surface {
    @apply w-full bg-white dark:bg-black/40 border border-gray-200 dark:border-white/10 text-text-main placeholder:text-text-muted focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all;
  }

  /* Logotipo */
  .app-logo {
    @apply font-bold text-xl text-text-main tracking-wider flex items-center gap-2;
  }
  .app-logo-accent {
    @apply text-accent drop-shadow-[0_0_8px_rgba(139,92,246,0.4)];
  }

  /* Botões */
  .btn {
    @apply flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 cursor-pointer active:scale-95;
  }

  .btn-primary {
    background-color: var(--accent);
    color: var(--accent-text);
    @apply hover:brightness-110 shadow-[0_0_15px_-3px_rgba(124,58,237,0.3)] border border-white/10;
  }

  .btn-secondary {
    @apply bg-bg-surface text-text-main border border-border-subtle hover:border-accent/50 hover:bg-bg-surface-hover shadow-sm hover:shadow-md;
  }

  .btn-icon {
    @apply p-2 text-text-muted hover:text-accent hover:bg-accent/10 rounded-full transition-colors;
  }
}

/* === 4. Scrollbars (Refinado) === */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}
::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 99px;
  transition: background 0.2s;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}
/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

/* ===========================
   MOBILE TWEAKS (MEDIA QUERIES)
   =========================== */

@media (max-width: 768px) {
  /* 1. Fix da Altura Real (Dynamic Viewport Height) 
     Corrige o bug onde a barra de endereço do Chrome/Safari corta o app */
  body {
    height: 100vh; /* Fallback */
    height: 100dvh; /* A mágica do CSS moderno */
  }

  /* 2. Scrollbars Mobile
     Em touch, scrollbars customizadas atrapalham. 
     Vamos escondê-las visualmente mas manter a rolagem (experiência nativa) */
  ::-webkit-scrollbar {
    width: 0px;
    background: transparent;
  }

  /* Resetar para comportamento nativo se preferir, ou manter oculto para 'clean look' */
  * {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
  }

  /* 3. Ajuste de Legibilidade
     Força um tamanho mínimo de fonte em elementos críticos para leitura */
  .prompt-content p,
  .prompt-content li {
    font-size: 16px !important; /* Evita que o usuário precise dar zoom */
    line-height: 1.6 !important;
  }

  /* 4. Aumentar área de toque (Fat Finger friendly) 
     Os itens da lista na sidebar precisam ser mais fáceis de clicar */
  #prompt-list-items > div {
    padding-top: 1rem !important;
    padding-bottom: 1rem !important;
  }

  /* 5. Ajuste do Editor 
     Remove o padding excessivo no mobile para ganhar espaço */
  #editor-overlay .flex-1.flex.gap-4 {
    flex-direction: column; /* Editor em cima, Preview embaixo no mobile */
  }

  #editor-overlay .w-1\/2 {
    width: 100% !important; /* Colunas viram linhas cheias */
    height: 50% !important;
  }
}
